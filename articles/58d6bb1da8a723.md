---
title: "ã‚ªãƒ¬ã‚ªãƒ¬ Next.js åˆæœŸè¨­å®š"
emoji: "ğŸ™†"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["nextjs","eslint","tailwindcss","jest", "prettier"]
published: true
---
æœ€è¿‘ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹å§‹ã™ã‚‹éš›ã¯ã€Next.js ã‚’é¸å®šã™ã‚‹ã“ã¨ãŒå¤šã„ã¨æ€ã„ã¾ã™ã€‚

`create-next-app` ã‚’ã—ãŸéš›ã«éƒ½åº¦ã€ã‚‚ã‚ã‚‚ã‚ã®åˆæœŸè¨­å®š (Prettier, Husky, storybook, etc...) ã‚’è¡Œã†å„€å¼ãŒã‚ã‚Šã¾ã™ã‚ˆã­ï¼Ÿ

ã“ã®å„€å¼ã§ã‚ã‚‹ç¨‹åº¦ ã€Œæœ€åˆã«è¨­å®šã—ã¨ããŸã„ã‚ˆã­ã€ã¨æ€ã†ã‚‚ã®ãŒè‡ªåˆ†ã®ä¸­ã§å›ºã¾ã£ã¦ããŸã®ã§ã€ä»Šå›ã¯ã‚ªãƒ¬ã‚ªãƒ¬åˆæœŸè¨­å®šã‚’ç´¹ä»‹ã—ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚

# ã‚„ã‚‹ã“ã¨
ä»¥ä¸‹ã®ã“ã¨ã‚’ã‚„ã‚Šã¾ã™ã€‚
1. Nodeç’°å¢ƒ: Volta
2. ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: Prettier
3. Lint ãƒ„ãƒ¼ãƒ«: ESLint, Husky, lint-staged
4. Test ãƒ„ãƒ¼ãƒ«: Jest, React Testing Library, Storybook
5. ãƒ†ãƒ³ãƒ—ãƒ¬è‡ªå‹•åŒ–: Plop
6. scripts æ•´ç†: package.json
7. IDE è¨­å®š: .editorconfig, VS Code(extensions.json, settings.json)

# `create-next-app`
ã¨ã«ã‚‚ã‹ãã«ã‚‚ã€ã“ã“ã‹ã‚‰å§‹ã¾ã‚‹ã€‚

`pnpm dlx create-next-app@latest`

ç¾åœ¨ (Next v13.4) ã¯ cli ã«å¾“ã†ã¨ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æ¬¡ã®è¨­å®šãŒã•ã‚Œã¾ã™ã€‚
- App Router
- React v18.2
- Typescript v5.1
- Tailwind v3.3
- ESLint v8.47
- typescript-eslint v6.4

### å‚è€ƒ
https://nextjs.org/docs/getting-started/installation

# Volta ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å›ºå®šã™ã‚‹
æ¬¡ã«ã‚„ã‚‹ã“ã¨ã¯ç¾åœ¨ã® Node.js ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å›ºå®šã™ã‚‹ã“ã¨ã§ã™ã€‚

[Volta](https://volta.sh/) ã¯ Node ã‚„ pnpm ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç®¡ç†ã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
`volta pin` ã‚³ãƒãƒ³ãƒ‰ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å›ºå®šã•ã›ã‚‹ã ã‘ã§ãªãã€è‡ªå‹•ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®åˆ‡ã‚Šæ›¿ãˆãŒè¡Œã‚ã¾ã™ã€‚ãƒãƒ¼ãƒ é–‹ç™ºã«ãŠã‘ã‚‹çµ±ä¸€çš„ãªç’°å¢ƒæ§‹ç¯‰ã«æœ‰åŠ¹ã§ã™ã€‚

```bash:terminal
volta pin node
```
```diff json:package.json
{
   // ...
   // è‡ªå‹•ã§ä½œæˆã•ã‚Œã‚‹
+  "volta": {
+    "node": "18.17.1",
+  }
}
```

# Prettier
[Prettier](https://prettier.io/) ã¯è¨€ã‚ãšã¨çŸ¥ã‚ŒãŸã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ã§ã™ã€‚

æœ«å°¾ã®ã‚»ãƒŸã‚³ãƒ­ãƒ³ã®æœ‰ç„¡ã‚„ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆå¹…ãªã©ã‚’è‡ªå‹•ã§æ•´ãˆã¦ãã‚Œã¾ã™ã€‚
ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆãŒæƒã£ã¦ã„ãªã„ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚€ã¨ç›®ãŒå¼¾ã‘é£›ã¶ã®ã§ç›®ã®ä¿è­·ã®ãŸã‚ã«ã‚‚å¿…é ˆã§å…¥ã‚Œã¾ã™ã€‚

ä»Šå›ã¯ tailwind ãŒå…¥ã£ã¦ã„ã‚‹ã®ã§ class åã®é †åºã‚’è‡ªå‹•ã§æ•´ãˆã¦ãã‚Œã‚‹ [`prettier-plugin-tailwindcss`](https://github.com/tailwindlabs/prettier-plugin-tailwindcss) ã¨ã„ã†ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚‚åŒæ™‚ã«å…¥ã‚Œã¾ã™ã€‚

### è¨­å®š
```bash:terminal
pnpm add --save-dev prettier eslint-config-prettier prettier-plugin-tailwindcss
```

æ¬¡ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç›´ä¸‹ã«é…ç½®ã™ã‚‹ã€‚
```json:.eslintrc.json
{
  "extends": ["next", "prettier"]
}
```
```json:.prettierrc.json
{
  "singleQuote": true,
  "semi": false,
  "plugins": ["prettier-plugin-tailwindcss"]
}
```
```yaml:.prettierignore
node_modules
.next
.plop
.editorconfig
.gitignore
.eslintignore
.prettierignore
*-lock.yaml
*.log*
```

eslint ã¨ prettier ã®è¨­å®šãŒç«¶åˆã—ãªã„ã‚ˆã†ã« eslint ã®è¨­å®šã‚’å¤‰æ›´

```diff json:.eslintrc.json
{
  "extends": [
    "next/core-web-vitals",
+    "prettier",
  ],
  // ...
}
```

### å‚è€ƒ

https://nextjs.org/docs/app/building-your-application/configuring/eslint#prettier

# ESlint
ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§è¨­å®šã•ã‚Œã¦ã„ã¾ã™ãŒã€ã•ã‚‰ã«è¿½åŠ ã—ã¾ã™ã€‚
ESLint ã¯èª“ç´„ã¨åˆ¶ç´„ã€‚ã‚ˆã‚Šå¼·ã„ç¸›ã‚Šã‚’ä»˜ã‘ã‚‹ã“ã¨ã§å¼·åŒ–ã•ã‚Œã¾ã™ã€‚

è¿½åŠ ã™ã‚‹è¨­å®šã¯3ã¤
1. [eslint:recommended](https://eslint.org/docs/latest/use/configure/configuration-files#using-eslintrecommended): jsç”¨ã®æ¨å¥¨ãƒ«ãƒ¼ãƒ«
2. [@typescript-eslint/recommended-type-checked](https://typescript-eslint.io/linting/typed-linting/): tsç”¨ã®æ¨å¥¨ãƒ«ãƒ¼ãƒ«
3. [eslint-plugin-import](https://github.com/import-js/eslint-plugin-import): module import ã®é †ç•ªã‚’åˆ¶å¾¡
4. [eslint-plugin-unused-imports](https://github.com/sweepline/eslint-plugin-unused-imports): æœªä½¿ç”¨ã® module import ã‚’å‰Šé™¤

### è¨­å®š

```bash:terminal
pnpm add --save-dev @typescript-eslint/parser @typescript-eslint/eslint-plugin eslint-plugin-import eslint-plugin-unused-imports
```

`.eslintrc.json` ã‚’å¤‰æ›´ã€‚
ã¡ãªã¿ã« extends ã§å…¥ã‚ŒãŸæ‹¡å¼µè¨­å®šã¯ä¸€ç•ªä¸‹ã®ã‚‚ã®ãŒå„ªå…ˆã•ã‚Œã¾ã™ã€‚

:::details .eslintrc.json
```json:.eslintrc.json
{
  "extends": [
    "eslint:recommended", // jsç”¨
    "plugin:@typescript-eslint/recommended-type-checked", // tsç”¨
    "next/core-web-vitals",
    "prettier",
  ],
  "plugins": ["import", "unused-imports"], // import ã®é †ç•ªã‚’åˆ¶å¾¡
  "parserOptions": {
    "project": ["./tsconfig.json"] // è¿½åŠ 
  },
  "rules": {
    "@typescript-eslint/no-unused-vars": "off", // unused-imports/no-unused-imports ã§ä»£ç”¨
    "unused-imports/no-unused-imports": "error",
    "import/order": [
      "error",
      {
        "groups": [
          "builtin",
          "external",
          "internal",
          "parent",
          "sibling",
          "object",
          "type",
          "index"
        ],
        "newlines-between": "always", // import groups ã®é–“ã‚’1è¡Œã‚ã‘ã‚‹
        "pathGroupsExcludedImportTypes": ["builtin"],
        "alphabetize": { "order": "asc", "caseInsensitive": true }, // å¤§æ–‡å­—å°æ–‡å­—é–¢ä¿‚ãªãã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †
        "pathGroups": [
          {
            "pattern": "@/components/**",
            "group": "internal",
            "position": "before"
          }
        ]
      }
    ]
  }
}
```
:::

### å‚è€ƒ
https://zenn.dev/resistance_gowy/articles/91b4f62b9f48ec

https://zenn.dev/cybozu_frontend/articles/ts-eslint-v6-guide

https://zenn.dev/rena_h/scraps/fd330154d02f76

# Husky & lint-staged
[Husky](https://github.com/typicode/husky) ã¯ Git ã® Hooks ã§ä»»æ„ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’èµ°ã‚‰ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
[lint-staged](https://github.com/okonet/lint-staged) ã¯ Git ã® staging ä¸Šã« lint ã‚’èµ°ã‚‰ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã¤ã¾ã‚Šã€Husky ã¨ lint-staged ã‚’ä½µç”¨ã™ã‚‹ã“ã¨ã§ commit æ™‚ã« lint ã‚’èµ°ã‚‰ã›ã¦ğŸ’©ãŒã‚³ãƒ¼ãƒ‰ã«ç´›ã‚Œè¾¼ã‚€ã“ã¨ã‚’é˜²ã’ã¾ã™ã€‚

### è¨­å®š
```bash:terminal
pnpm add --save-dev husky lint-staged
pnpm pkg set scripts.prepare="husky install"
pnpm run prepare
pnpm dlx husky add .husky/pre-commit "npx lint-staged"
```

```diff json:package.json
{
   // ...
   // è¿½åŠ ã™ã‚‹
+  "lint-staged": {
+    "*.{ts, tsx}": "eslint --cache --cache-location .next/cache/eslint/ --fix", // next lint ã ã¨ .envã‚’ãƒ­ãƒ¼ãƒ‰ã—ã‚ˆã†ã¨ã—ã¦ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ãŸã‚ eslint ã§å®Ÿè¡Œã€‚
+    "*.{js,jsx,ts,tsx,json}": "prettier --write"
+  }
}
```

# Jest & React Testing Library
[Jest](https://jestjs.io/ja/) ã¯ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰æ›¸ãä¸Šã§å¿…è¦ãªæ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ãƒ†ã‚¹ãƒ†ã‚£ãƒ³ã‚°ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€‚
æœ€è¿‘ã¯ä¼¼ãŸã¨ã“ã‚ã§ [Vitest](https://vitest.dev/) ã®å‹¢ã„ãŒè‰¯ã„ã‘ã©æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒ v0.34 ã®ãŸã‚ã¾ã è¦‹é€ã£ã¦ã„ã‚‹ã€‚

[React Testing Library](https://testing-library.com/docs/react-testing-library/intro) ã¯ React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å®Ÿéš›ã® DOM ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã¦ãã‚Œã‚‹ã€‚

ã¤ã¾ã‚Šã€é›£ã—ã„ã“ã¨ã‚’æŠœãã«ã—ã¦ React ã®ãƒ†ã‚¹ãƒˆã‚’æ›¸ããªã‚‰å¿…è¦ãªãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

ã€Œãƒ†ã‚¹ãƒˆã‚’æ›¸ãäºˆå®šãŒãªã„ã‹ã‚‰å…¥ã‚Œãªãã¦è‰¯ã„ã‹ãª...ã€ã¨ãªã£ã¦ã‚‚ã€ãƒ†ã‚¹ãƒˆã‚’æ›¸ããŸããªã£ãŸã¨ãã«æ›¸ã‘ã‚‹çŠ¶æ³ã‚’ä½œã£ã¦ãŠããŸã„æ´¾ãªã®ã§æœ€åˆã«å…¥ã‚Œã¾ã™ã€‚

### è¨­å®š

```bash:terminal
pnpm add --save-dev jest jest-environment-jsdom @types/jest @testing-library/react @testing-library/jest-dom
```

jest.config.mjs ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç›´ä¸‹ã«é…ç½®ã™ã‚‹ã€‚
```js:jest.config.mjs
import nextJest from 'next/jest.js'

const createJestConfig = nextJest({
  // Provide the path to your Next.js app to load next.config.js and .env files in your test environment
  dir: './',
})

// Add any custom config to be passed to Jest
/** @type {import('jest').Config} */
const config = {
  setupFilesAfterEnv: ['<rootDir>/jest.setup.js'],
  testEnvironment: 'jest-environment-jsdom',
}

// createJestConfig is exported this way to ensure that next/jest can load the Next.js config which is async
export default createJestConfig(config)
```

ã»ã¼ç¢ºå®Ÿã«ä½¿ã†ã®ã§æ‹¡å¼µæ©Ÿèƒ½(`jest-dom`)ã‚’è¿½åŠ ã§ import ã—ã¦ãŠãã¾ã™
```js:jest.setup.js
import '@testing-library/jest-dom'
```

```diff json:tsconfig.json
{
    // ...
+   "include": [
     // ...
+    "./jest.setup.js"
+  ],
}
```

`scripts` ã«ã‚‚è¿½åŠ 
```diff json:package.json
{
  "scripts": {
      // ...
+     "test": "jest"
  }
}
```

### å‚è€ƒ

https://nextjs.org/docs/pages/building-your-application/optimizing/testing#jest-and-react-testing-library

# Storybook
[Storybook](https://storybook.js.org/) ã¯ UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå˜ä½“ã§è¡¨ç¤ºã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚Jest ã§ã¯ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®ãƒ†ã‚¹ãƒˆã‚’è¡Œã„ã€Storybookã§ã¯ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ã®ãƒ†ã‚¹ãƒˆã‚’è¡Œã„ã¾ã™ã€‚ç‰¹ã«ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ã‚„ PdM ãªã©ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ä»¥å¤–ã«è¦‹ã›ã‚‹éš›ã«ã‚‚æœ‰åŠ¹ã§ã™ã€‚

### è¨­å®š

Storybook ä¸Šã§ Tailwind ã‚’ä½¿ãˆã‚‹ã‚ˆã†ã« addon ã‚‚å…¥ã‚Œã¾ã™
```bash:terminal
pnpm dlx storybook@latest init
pnpm add --save-dev @storybook/addon-styling
pnpm addon-styling-setup
```

```ts:.storybook/main.ts
import type { StorybookConfig } from '@storybook/nextjs'

const config: StorybookConfig = {
  // stories ã®å ´æ‰€ã‚’ app/*, components/* ã«å¤‰æ›´
  stories: [
    '../app/**/*.stories.@(js|jsx|mjs|ts|tsx)',
    '../components/**/*.stories.@(js|jsx|mjs|ts|tsx)',
  ],
}
```
```diff ts:.storybook/preview.ts
- import '../src/index.css'
+ import '../app/globals.css' // tailwind èª­ã¿è¾¼ã¿
```
```diff ts:tailwind.config.ts
const config: Config = {
   content: [...],
+  darkMode: ['class', '[data-mode="dark"]'],
   // ...
}
```

### å‚è€ƒ
https://storybook.js.org/recipes/next

https://storybook.js.org/recipes/tailwindcss

# Plop
[Plop](https://plopjs.com/) ã¯ã‚³ãƒ¼ãƒ‰ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã§ã€ãƒ†ãƒ³ãƒ—ãƒ¬çš„ãªã‚³ãƒ¼ãƒ‰ã®ç”Ÿæˆã‚’è‡ªå‹•åŒ–ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ä¼¼ãŸãƒ„ãƒ¼ãƒ«ã« [Hygen](https://www.hygen.io/) ãŒã‚ã‚Šã¾ã™ãŒã€å€‹äººçš„ãªå¥½ã¿ã§ Plop ã‚’ä½¿ç”¨ã€‚

ã“ã¡ã‚‰ã‚’ä½¿ã†ã“ã¨ã§ `pnpm gen` ã‚³ãƒãƒ³ãƒ‰ã§å¯¾è©±å½¢å¼ã§ component, stories, test ã®é››å½¢ã‚’è‡ªå‹•ç”Ÿæˆã§ãã‚‹ã«ãªã‚Šã¾ã™ã€‚

â†“ã“ã‚“ãªæ„Ÿã˜ã§ç”Ÿæˆã§ãã‚‹ã€‚
```bash: terminal
pnpm gen

> next-13-template@0.1.0 gen <DIR>/next-13-template
> plop component

? Where is the path to create components? (e.g. components) components
? What is the component name? (e.g. button) input
âœ”  ++ /components/Input/index.tsx
âœ”  ++ /components/Input/Input.test.tsx
âœ”  ++ /components/Input/Input.stories.tsx
```

### è¨­å®š
```bash:terminal
pnpm add --save-dev plop
```
```diff json:package.json
{
   "scripts": {
     //...
+    "gen": "plop component",
   }
   // ...
}
```

é››å½¢ã‚’ä½œã‚‹ãŸã‚ã«ã€`plopfile.mjs` ã¨ `.plop/\<template>.tsx.hbs` ã‚’è¿½åŠ ã™ã‚‹ã€‚
:::details plopfile.mjs
```js:plopfile.mjs
export default function (plop) {
  plop.setGenerator('component', {
    description: 'create a new component',
    prompts: [
      {
        type: 'input',
        name: 'path',
        message: 'Where is the path to create components? (e.g. components)',
      },
      {
        type: 'input',
        name: 'name',
        message: 'What is the component name? (e.g. button)',
      },
    ],
    actions: [
      {
        type: 'add',
        path: '{{path}}/{{pascalCase name}}/index.tsx',
        templateFile: '.plop/index.tsx.hbs',
        skipIfExists: true,
      },
      {
        type: 'add',
        path: '{{path}}/{{pascalCase name}}/{{pascalCase name}}.test.tsx',
        templateFile: '.plop/component.test.tsx.hbs',
      },
      {
        type: 'add',
        path: '{{path}}/{{pascalCase name}}/{{pascalCase name}}.stories.tsx',
        templateFile: '.plop/component.stories.tsx.hbs',
      },
    ],
  })
}
```
:::

:::details .plop/
```tsx:index.tsx.hbs
import { FC } from 'react'

type Props = {}

export const {{pascalCase name}}: FC<Props> = () => {
  return (
    <div>
      {{pascalCase name}}
    </div>
  )
}
```
```tsx:component.stories.tsx.hbs
import type { Meta, StoryObj } from "@storybook/react"
import { {{pascalCase name}} } from '.'

type T = typeof {{pascalCase name}}

export default {
  component: {{pascalCase name}},
} satisfies Meta<T>

type Story = StoryObj<T>

export const Default: Story = {
  args: {},
}
```
```tsx:component.test.tsx.hbs
import { render, screen } from "@testing-library/react"
import { {{pascalCase name}} } from "."

test('renders {{pascalCase name}} component', () => {
  render(<{{pascalCase name}} />)


})
```
:::

### å‚è€ƒ
https://plopjs.com/documentation/#getting-started

https://zenn.dev/sum0/articles/9463d16d9d40e2

# package.json ã® scripts ã‚’æ•´ç†
è¤‡æ•°å›ä½¿ã†ã‚³ãƒãƒ³ãƒ‰ã¯ scripts ã«ã¾ã¨ã‚ã¦ãŠãã¾ã™ã€‚
ç‰¹ã«`dev`, `build`, `test`, `lint` ã‚ãŸã‚Šã¯å…±é€šèªè­˜ã¨ã—ã¦ã‚ã‚‹ã®ã§åŸºæœ¬ã“ã®å½¢ã«åã‚ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

### è¨­å®š
`"dev": next dev && storybook dev` ã¿ãŸã„ãªæ›¸ãæ–¹ã¯è¦‹ã¥ã‚‰ã„ã®ã§ã€è¤‡æ•°ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã§ãã‚‹[npm-run-all](https://www.npmjs.com/package/npm-run-all)ã‚’ installã—ã¦ãŠãã¾ã™ã€‚

```bash:terminal
pnpm add --save-dev npm-run-all
```

`npm-run-all` ã«ã‚ˆã‚Š `run-p dev:*` ã§æ¡ä»¶ã«ãƒãƒƒãƒã™ã‚‹ `dev:next` `dev:storybook` ã®ã‚ˆã†ãªè¤‡æ•°ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚
ã¡ãªã¿ã« `run-p` ã¯ä¸¦è¡Œå®Ÿè¡Œã€‚`run-s` ã¯é€æ¬¡å®Ÿè¡Œã«ãªã‚Šã¾ã™ã€‚ `-c` ã¯ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã‚‚å‡¦ç†ã‚’é€”ä¸­ã§ä¸­æ–­ã›ãšå…¨ã¦ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™ã€‚

```json:package.json
"scripts": {
    "dev": "run-p dev:*",
    "dev:next": "next dev",
    "dev:storybook": "storybook dev -p 6006",
    "start": "next start",
    "build": "run-s build:*",
    "build:next": "next build",
    "build:storybook": "build-storybook",
    "lint": "run-s -c lint:*",
    "lint:eslint": "next lint",
    "lint:prettier": "prettier --check './**/*.{js,jsx,ts,tsx,json}'",
    "lint-fix": "run-s -c lint-fix:*",
    "lint-fix:eslint": "npm run lint:eslint -- --fix",
    "lint-fix:prettier": "prettier --write './**/*.{js,jsx,ts,tsx,json}'",
    "test": "jest",
    "coverage": "jest --coverage",
    "gen": "plop component",
    "prepare": "husky install"
  },
```

### å‚è€ƒ

https://www.mizdra.net/entry/2022/03/24/093000

# IDE è¨­å®š
IDE ã¨ã„ã„ã¤ã¤ VS Code ã®è©±ãŒãƒ¡ã‚¤ãƒ³ã§ã™ã€‚
ãƒ¡ãƒ³ãƒãƒ¼ã« VS Code ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã„ãªã„ãªã‚‰å¿…è¦ãªã„ã‹ã‚‚ã§ã™ãŒã€æœ€è¿‘ã®ãƒ•ãƒ­ãƒ³ãƒˆã ã¨ VS Code ã®ä½¿ç”¨ç‡ãŒé«˜ã„ã®ã§ã¨ã‚Šã‚ãˆãšå…¥ã‚Œã¦ã„ã¾ã™ã€‚

## .editorconfig
[EditorConfig](https://editorconfig.org/)ã¯æ–‡å­—ã‚³ãƒ¼ãƒ‰ã‚„ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆè¨­å®šãŒå¯èƒ½ã§ã™ã€‚

Prettier ã‚’å…¥ã‚Œã¦ã„ã‚‹ã¨è¨­å®šãŒé‡è¤‡ã™ã‚‹éƒ¨åˆ†ã‚‚ã‚ã‚Šã¾ã™ãŒã€Prettier ã§ã¯ã‚«ãƒãƒ¼ã—ãã‚Œãªã„ç¯„å›²ã‚’ã‚«ãƒãƒ¼ã§ããŸã‚Šã€å¤šãã® IDE ã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã®ã§è¿·ã£ãŸã‚‰å…¥ã‚Œã¦ãŠã‘ã°è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚

.editorconfigã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç›´ä¸‹ã«é…ç½®ã™ã‚‹ã€‚
```yaml:.editorconfig
root = true

[*]
charset = utf-8
end_of_line = lf
indent_style = space
trim_trailing_whitespace = true
insert_final_newline = true

[*.{js,ts,jsx,tsx,md,json,vue,css,scss,sass,html}]
indent_size = 2
```

VS Code ã ã¨ã“ã¡ã‚‰ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å…¥ã‚Œã¦ãã ã•ã„ã€‚
https://marketplace.visualstudio.com/items?itemName=EditorConfig.EditorConfig

## extensions.json
extensions.json ã¯ VS Code ã®ãŠã™ã™ã‚ã®æ‹¡å¼µæ©Ÿèƒ½ã‚’ãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
Prettier æ‹¡å¼µæ©Ÿèƒ½ãªã‚“ã‹ã¯ãƒã‚¹ãƒˆã ã¨æ€ã„ã¾ã™ã€‚

è‡ªåˆ†ã¯ã“ã“ã‚‰ã¸ã‚“ã‚’å…¥ã‚Œã¦ã„ã¾ã™ã€‚Vercel ã® setting.json ã‚’çœŸä¼¼ã—ãŸã‚Šã—ã¦ã„ã‚‹ã®ã§ OSS è¦‹ã¦ã¿ã‚‹ã®ã‚‚è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚
- prettier-vscode: Prettier ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜æ™‚ã«èµ°ã‚‰ã›ã‚‹ãŸã‚
- vscode-eslint: ESLint ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜æ™‚ã«èµ°ã‚‰ã›ã‚‹ãŸã‚
- errorlens: lint ã®ã‚¨ãƒ©ãƒ¼ãŒã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã§è¡¨ç¤ºã•ã‚Œã‚‹ã€‚ã‚¨ãƒ©ãƒ¼ã®å¯èª­æ€§ãŒä¸ŠãŒã‚‹
- code-spell-checker: typo æ¤œçŸ¥
- vscode-jest: VS Code ä¸Šã‹ã‚‰ Jest ã‚’å‹•ã‹ã›ã‚‹
- vscode-pull-request-github: PR ã‚’ VS Code ã§è¦‹ã‚‹ã“ã¨ãŒã§ãã‚‹
- vscode-tailwindcss: Tailwind ã®è£œå®Œ

::::details .vscode/extensions.json
```json:.vscode/extensions.json
{
  "recommendations": [
    // Linting / Formatting
    "esbenp.prettier-vscode",
    "dbaeumer.vscode-eslint",
    "usernamehw.errorlens",

    // Spell checker
    "streetsidesoftware.code-spell-checker",

    // Testing
    "orta.vscode-jest",

    // PR management / Reviewing
    "github.vscode-pull-request-github",

    // MDX Authoring
    "unifiedjs.vscode-mdx"

    // Tailwind
    "bradlc.vscode-tailwindcss"
  ]
}
```
::::

### å‚è€ƒ
https://github.com/vercel/next.js/blob/canary/.vscode/extensions.json

## settings.json
[settings.json](https://code.visualstudio.com/docs/getstarted/settings) ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå˜ä½ã§ VS Code ã®è¨­å®šã‚’é©ç”¨ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¿å­˜æ™‚ã« Prettier ã‚’è‡ªå‹•ã§èµ°ã‚‰ã›ãŸã‚Šãªã©ä¾¿åˆ©ãªè¨­å®šãŒã§ãã‚‹ã®ã§å…¥ã‚Œã¾ã™ã€‚
è‡ªåˆ†ã¯ã“ã“ã‚‰ã¸ã‚“ã®è¨­å®šã‚’ã—ã¦ã„ã¾ã™ã€‚ã“ã¡ã‚‰ã‚‚ extensions ã¨åŒæ§˜ã« Vercel ã‚’çœŸä¼¼ã—ãªãŒã‚‰ä½œã£ã¦ã„ã‚‹ã€‚
- ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜æ™‚ã« Prettier ãŒèµ°ã‚‹ã‚ˆã†ã«
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ã‚’ Prettier ã«è¨­å®š
- Jest ãŒå‹æ‰‹ã«èµ°ã‚‰ãªã„ã‚ˆã†ã«å¤‰æ›´
- Typescript ã®ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆèª¿æŸ»ãŒå‡ºã¦ã“ãªããªã‚‹ã‚ˆã†ã«è¨­å®š
- spell checker ã®è¾æ›¸ç™»éŒ²ã€‚ä¸€èˆ¬çš„ã§ã¯ãªã„èªå¥ãŒ typo åˆ¤å®šã•ã‚Œã¦ã—ã¾ã†ã®ã§ã€é–‹ç™ºè€…ãŒã‚ˆãä½¿ã†å›ºæœ‰åè©ãªã©ã‚’ç™»éŒ²ãŠãã€‚

::::details .vscode/settings.json

```json:.vscode/settings.json
{
  // Formatting using Prettier by default for all languages
  "editor.defaultFormatter": "esbenp.prettier-vscode",

  // Formatting using Prettier for JavaScript, overrides VSCode default.
  "[javascript]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode",
    "editor.formatOnSave": true
  },
  "[typescript]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode",
    "editor.formatOnSave": true
  },
  // Linting using ESLint.
  "eslint.validate": [
    "javascript",
    "javascriptreact",
    "typescript",
    "typescriptreact"
  ],
  // Disable Jest autoRun as otherwise it will start running all tests the first time.
  "jest.autoRun": "off",
  "jest.jestCommandLine": "pnpm test --",

  // Disable TypeScript surveys.
  "typescript.surveys.enabled": false,

  "cSpell.words": [
    "Entrypoints",
    "nextjs",
    "opentelemetry",
    "pnpm",
    "tailwindcss",
    "Threadsafe"
  ]
}
```
::::

### å‚è€ƒ
https://github.com/vercel/next.js/blob/canary/.vscode/settings.json

# æœ€å¾Œã«
å®Œæˆç³»ã®ã‚³ãƒ¼ãƒ‰ã¯ã“ã¡ã‚‰ã«ã‚ã’ã¦ã„ã¾ã™ã€‚
https://github.com/wwwyo/next13-template

ã‚ãã¾ã§ã‚‚ã‚ªãƒ¬ã‚ªãƒ¬ãªã®ã§ã“ã‚ŒãŒå…¨ã¦ã¨ã„ã†ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€å¤§ä½“ä¼¼é€šã£ã¦ãã‚‹ã‚“ã˜ã‚ƒãªã„ã‹ãªãã¨æ€ã£ã¦ã„ã¾ã™ã€‚

**ãœã²ãŠã™ã™ã‚ã®ã‚ªãƒ¬ã‚ªãƒ¬è¨­å®šãŒã‚ã‚Œã°æ•™ãˆã¦ãã ã•ã„ï¼**